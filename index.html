<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Mini Game Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/simplex-noise/2.4.0/simplex-noise.min.js"></script>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <div id="menu">
        <h1>ğŸ® Ultimate Mini Game Hub</h1>
        <button data-game="clicker-game">ğŸ’° Clicker Game</button>
        <button data-game="maze-game">ğŸŒ€ Maze Game</button>
        <button data-game="runner-game">ğŸƒ Endless Runner</button>
        <button data-game="typing-game">âŒ¨ Typing Speed Test</button>
        <button data-game="snake-game">ğŸ Snake</button>
        <button data-game="pong-game">ğŸ“ Pong</button>
        <button data-game="space-game">ğŸš€ Space Shooter</button>
        <button data-game="tetris-game">ğŸ§± Tetris</button>
        <button data-game="breakout-game">ğŸ§± Breakout</button>
        <button data-game="rpg-game">âš”ï¸ RPG</button>
        <button data-game="eclipse-game">â˜€ï¸ Eclipse</button>
        <button data-game="eclipse-puzzle-game">ğŸ§© Eclipse Puzzle</button>
        <button data-game="eclipse-logic-puzzle-game">ğŸ’¡ Eclipse Logic Puzzle</button>
        <button data-game="matterhorn-game">ğŸ”ï¸ Matterhorn Ascent</button>
        <button data-game="aetheria-game">â˜ï¸ Aetheria</button>
    </div>

    <div id="aetheria-game" class="hidden game-container">
        <div id="aetheria-game-container"></div>
        <div id="aetheria-ui-layer">
            <div id="aetheria-selection-screen">
                <h1>Aetheria</h1>
                <p>Choose your vessel to explore the infinite floating isles.</p>
                
                <div class="aetheria-avatars">
                    <div class="aetheria-avatar-card" onclick="startAetheriaGame('construct')">
                        <div class="aetheria-avatar-icon" style="background: #e74c3c;">ğŸ¤–</div>
                        <div class="aetheria-avatar-name">The Construct</div>
                        <div class="aetheria-avatar-desc">Heavy, stable, industrial aesthetics.</div>
                    </div>
                    <div class="aetheria-avatar-card" onclick="startAetheriaGame('spirit')">
                        <div class="aetheria-avatar-icon" style="background: #2ecc71;">ğŸŒ¿</div>
                        <div class="aetheria-avatar-name">The Spirit</div>
                        <div class="aetheria-avatar-desc">Light, floating, nature-infused.</div>
                    </div>
                    <div class="aetheria-avatar-card" onclick="startAetheriaGame('voyager')">
                        <div class="aetheria-avatar-icon" style="background: #9b59b6;">ğŸ”®</div>
                        <div class="aetheria-avatar-name">The Voyager</div>
                        <div class="aetheria-avatar-desc">Mysterious, glowing, cosmic energy.</div>
                    </div>
                </div>
            </div>

            <div id="aetheria-hud">
                COORD: <span id="aetheria-coord-display">0, 0</span><br>
                ALT: <span id="aetheria-alt-display">0</span>
            </div>
            
            <div id="aetheria-controls-hint">
                WASD to Move | SPACE to Jump<br>
                Mouse to Rotate Camera
            </div>
        </div>
        <button class="back-btn" style="position: absolute; top: 20px; right: 20px; z-index: 200;">Back to Hub</button>
    </div>

    <div id="matterhorn-game" class="hidden game-container">
        <canvas id="matterhornCanvas"></canvas>

        <!-- UI Layers -->
        <div id="mh-ui-root" class="layer interactive">

            <!-- HUD -->
            <div id="mh-hud-container" class="hidden">
                <div class="mh-hud-box">
                    ALT: <span id="mh-hud-alt">0m</span><br>
                    TEMP
                    <div class="mh-bar"><div id="mh-hud-temp" class="mh-bar-fill" style="background:#ef4444"></div></div>
                    STAMINA
                    <div class="mh-bar"><div id="mh-hud-stamina" class="mh-bar-fill" style="background:#fbbf24"></div></div>
                </div>

                <div class="mh-hud-box">
                    â‚£ <span id="mh-hud-money">0</span><br>
                    <span style="font-size:0.75rem;color:#aaa;">
                        Objective: <span id="mh-hud-objective">Explore Zermatt</span>
                    </span>
                </div>
            </div>

            <!-- Prompt -->
            <div id="mh-prompt">PRESS [E]</div>

            <!-- Notifications -->
            <div id="mh-notifications"></div>

            <!-- Start Screen -->
            <div id="mh-start-screen" class="layer interactive">
                <div id="mh-start-content">
                    <h1>MATTERHORN</h1>
                    <h2>Legends of the Alps</h2>
                    <p style="max-width:400px;margin:auto;color:#ddd;margin-bottom: 20px;">
                        Build your alpine reputation, master the lake, and gather gear to survive the ascent.
                    </p>
                    <button id="mh-start-btn" class="mh-btn">Begin Ascent</button>
                </div>
            </div>
        </div>

        <button class="back-btn" style="position: absolute; top: 20px; right: 20px; z-index: 200;">Back to Hub</button>
    </div>

    <div id="eclipse-game" class="hidden game-container">
        <h2>â˜€ï¸ Eclipse</h2>
        <div id="eclipse-grid" class="grid-container"></div>
        <div id="eclipse-info">
            <p>Time: <span id="eclipse-timer">0</span>s</p>
            <button id="eclipse-hint-btn">Hint</button>
            <button id="eclipse-share-btn">Share</button>
        </div>
        <div id="eclipse-message" class="game-message"></div>
        <button class="back-btn">Back</button>
    </div>

    <div id="eclipse-puzzle-game" class="hidden game-container">
        <h2>ğŸ§© Eclipse Puzzle</h2>
        <p>Fill the grid with suns and moons. Each row and column must have three of each. No more than two of the same symbol can be adjacent.</p>
        <div class="eclipse-game-area">
            <div class="eclipse-grid-container">
                <div id="eclipse-puzzle-grid" class="eclipse-grid"></div>
                <div id="eclipse-puzzle-clue-layer" class="eclipse-clue-layer"></div>
            </div>
            <div class="eclipse-sidebar">
                <div id="eclipse-puzzle-timer" class="eclipse-timer">Time: 0s</div>
                <div class="eclipse-game-controls">
                    <button id="eclipse-puzzle-validate-btn">Validate</button>
                    <button id="eclipse-puzzle-reset-btn">Reset</button>
                </div>
            </div>
        </div>
        <button class="back-btn">Back</button>
    </div>

    <div id="rpg-game" class="hidden game-container">
        <h2>âš”ï¸ RPG</h2>
        <div id="rpg-player-stats">
            <p>Player HP: <span id="rpg-player-hp"></span></p>
            <p>Player Level: <span id="rpg-player-level"></span></p>
            <p>Player XP: <span id="rpg-player-xp"></span></p>
        </div>
        <div id="rpg-enemy-stats">
            <p>Enemy: <span id="rpg-enemy-name"></span></p>
            <p>Enemy HP: <span id="rpg-enemy-hp"></span></p>
        </div>
        <div id="rpg-actions">
            <button id="rpg-attack-btn">Attack</button>
            <button id="rpg-heal-btn">Heal</button>
        </div>
        <div id="rpg-log"></div>
        <button class="back-btn">Back</button>

    </div>

    <div id="breakout-game" class="hidden game-container">
        <h2>ğŸ§± Breakout</h2>
        <canvas id="breakoutCanvas" width="480" height="320"></canvas>
        <button class="back-btn">Back</button>
    </div>

    <div id="tetris-game" class="hidden game-container">
        <h2>ğŸ§± Tetris</h2>
        <canvas id="tetrisCanvas" width="200" height="400"></canvas>
        <p>Score: <span id="tetris-score">0</span></p>
        <button class="back-btn">Back</button>
    </div>

    <div id="clicker-game" class="hidden game-container">
        <h2>ğŸ’° Clicker Game</h2>
        <p>Money: <span id="money">0</span> ğŸ’¸</p>
        <button>ğŸ’µ Click for Cash!</button>

        <h3>ğŸ›’ Store</h3>
        <button>âš¡ Upgrade Click (Cost: <span id="upgrade-cost">10</span>)</button>
        <button>ğŸ¤– Auto-Clicker (Cost: <span id="autoclicker-cost">50</span>)</button>
        <button id="prestige-btn" class="hidden">ğŸ” Prestige (Reset for Bonus!)</button>

        <p>Click Power: <span id="click-power">1</span> ğŸ–±ï¸</p>
        <p>Auto-Clicks Per Second: <span id="auto-rate">0</span> â³</p>
        <p>Prestige Multiplier: <span id="prestige-multiplier">1x</span> ğŸš€</p>

        <button class="back-btn">Back</button>
    </div>

    <div id="maze-game" class="hidden game-container">
        <h2>ğŸŒ€ Maze Game</h2>
        <canvas id="mazeCanvas" width="400" height="400"></canvas>
        <p>Use <b>Arrow Keys</b> to navigate the maze!</p>
        <p>ğŸ† Reach the gold square to win!</p>
        <p>ğŸ‘¾ Avoid the enemies!</p>
        <button class="back-btn">Back</button>
    </div>

    <div id="runner-game" class="hidden game-container">
        <h2>ğŸƒ Endless Runner</h2>
        <canvas id="runnerCanvas" width="600" height="200"></canvas>
        <p>Press <b>Spacebar</b> to jump over obstacles!</p>
        <p>Score: <span id="runner-score">0</span></p>
        <button class="back-btn">Back</button>
    </div>

    <div id="typing-game" class="hidden game-container">
        <h2>âŒ¨ Typing Speed Test</h2>
        <p>Type the sentence below as fast as you can:</p>
        <p id="typing-sentence" style="font-weight: bold;"></p>
        <input type="text" id="typing-input" placeholder="Start typing...">
        <p>â³ Time: <span id="typing-timer">0</span> seconds</p>
        <p>âš¡ WPM: <span id="typing-wpm">0</span></p>
        <p>ğŸ¯ Accuracy: <span id="typing-accuracy">100%</span></p>
        <button>ğŸ”„ Try Again</button>
        <button class="back-btn">Back</button>
    </div>

    <div id="snake-game" class="hidden game-container">
        <h2>ğŸ Snake Game</h2>
        <canvas id="snakeCanvas" width="400" height="400"></canvas>
        <p>Use <b>Arrow Keys</b> to move!</p>
        <p>ğŸ Score: <span id="snake-score">0</span></p>
        <button class="back-btn">Back</button>
    </div>

    <div id="pong-game" class="hidden game-container">
        <h2>ğŸ“ Pong</h2>
        <canvas id="pongCanvas" width="600" height="400"></canvas>
        <p>Player 1: <b>W / S</b> | Player 2: <b>Up / Down</b></p>
        <p>ğŸ¯ Score: <span id="pong-score">0 - 0</span></p>
        <button class="back-btn">Back</button>
    </div>

    <div id="space-game" class="hidden game-container">
        <h2>ğŸš€ Space Shooter</h2>
        <canvas id="spaceCanvas" width="500" height="400"></canvas>
        <p>Use <b>Arrow Keys</b> to move & <b>Spacebar</b> to shoot!</p>
        <p>ğŸ¯ Score: <span id="space-score">0</span></p>
        <button class="back-btn">Back</button>
    </div>

    <script src="js/games/clicker.js"></script>
    <script src="js/games/maze.js"></script>
    <script src="js/games/runner.js"></script>
    <script src="js/games/typing.js"></script>
    <script src="js/games/snake.js"></script>
    <script src="js/games/pong.js"></script>
    <script src="js/games/space.js"></script>
    <script src="js/games/tetris.js"></script>
    <script src="js/games/breakout.js"></script>
    <div id="eclipse-logic-puzzle-game" class="hidden game-container">
        <!-- Game Title -->
        <div class="flex items-center gap-2 mb-6">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#f59e0b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
            <h1 class="text-4xl font-bold text-slate-700">Eclipse Logic Puzzle</h1>
        </div>

        <!-- Game Board -->
        <div id="eclipselogic-grid-container" class="grid-container aspect-square w-full max-w-sm sm:max-w-md md:max-w-lg rounded-lg p-2 bg-slate-200">
            <!-- Indicators will be generated by JS -->
            <div id="eclipselogic-game-board" class="game-grid rounded-md overflow-hidden"></div>
        </div>

        <!-- Controls -->
        <div class="flex items-center justify-center flex-wrap gap-3 mt-6 w-full max-w-sm sm:max-w-md md:max-w-lg">
            <div class="bg-white rounded-lg px-4 py-2 text-slate-700 font-semibold text-lg shadow-sm">
                Time: <span id="eclipselogic-timer">0s</span>
            </div>
            <button id="eclipselogic-reset-button" class="px-5 py-2 bg-slate-400 text-white font-semibold rounded-lg shadow-md hover:bg-slate-500 transition-all transform hover:scale-105">Reset</button>
            <button id="eclipselogic-ai-hint-button" class="px-5 py-2 bg-sky-500 text-white font-semibold rounded-lg shadow-md hover:bg-sky-600 transition-all transform hover:scale-105 flex items-center gap-2">âœ¨ AI Hint</button>
            <button id="eclipselogic-check-solution-button" class="px-5 py-2 bg-green-500 text-white font-semibold rounded-lg shadow-md hover:bg-green-600 transition-all transform hover:scale-105">Check Solution</button>
        </div>

        <!-- Message Area -->
        <div id="eclipselogic-message-area" class="mt-4 text-center h-6 font-semibold"></div>

        <!-- Win Modal -->
        <div id="eclipselogic-win-modal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 fade-in">
            <div class="bg-white rounded-2xl shadow-2xl p-8 text-center max-w-sm w-full">
                <h2 class="text-3xl font-bold text-yellow-500 mb-2">You Solved It!</h2>
                <p class="text-slate-600 mb-6">Congratulations! You finished in <span id="eclipselogic-final-time" class="font-bold">0s</span>.</p>
                <div class="flex flex-col gap-3">
                     <button id="eclipselogic-share-score-button" class="w-full px-8 py-3 bg-blue-500 text-white font-bold rounded-lg shadow-lg hover:bg-blue-600 transition-all transform hover:scale-105">Share Score</button>
                     <button id="eclipselogic-play-again-button" class="w-full px-8 py-3 bg-slate-400 text-white font-bold rounded-lg hover:bg-slate-500 transition-all">Play Again</button>
                </div>
            </div>
        </div>

        <!-- Share Modal -->
        <div id="eclipselogic-share-modal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 fade-in">
            <div class="bg-white rounded-2xl shadow-2xl p-8 text-center max-w-sm w-full">
                <h2 class="text-3xl font-bold text-blue-500 mb-4">Share Your Grid</h2>
                <textarea id="eclipselogic-share-text" class="w-full h-48 p-2 border rounded-md bg-slate-100 text-sm font-mono" readonly></textarea>
                <div class="flex flex-col gap-3 mt-4">
                     <button id="eclipselogic-copy-button" class="w-full px-8 py-3 bg-green-500 text-white font-bold rounded-lg shadow-lg hover:bg-green-600 transition-all">Copy to Clipboard</button>
                     <button id="eclipselogic-close-share-button" class="w-full px-8 py-3 bg-slate-400 text-white font-bold rounded-lg hover:bg-slate-500 transition-all">Close</button>
                </div>
            </div>
        </div>
        <button class="back-btn">Back</button>
    </div>

    <script src="js/games/rpg.js"></script>
    <script src="js/games/eclipse.js"></script>
    <script src="js/games/eclipsePuzzle.js"></script>
    <script src="js/games/eclipseLogicPuzzle.js"></script>
    <script type="module" src="js/games/matterhorn.js"></script>
    <script type="module" src="js/games/aetheria/aetheria.js"></script>
    <script src="js/soundManager.js"></script>
    <script src="js/saveSystem.js"></script>
    <script type="module" src="js/main.js"></script>
</body>
</html>
